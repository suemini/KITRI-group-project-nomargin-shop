
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<link rel="stylesheet" href="/CSS/cart.css">
<script src="/JS/cart.js" th:inline="javascript"></script>
<th:block th:replace="fragments/head :: headFragment"></th:block>

<body>
<div class="container" id="'wrapper">
  <th:block th:replace="fragments/header :: headerFragment"></th:block>

  <h1 th:text="|${member.getLoginId()}의 장바구니|">Shopping Cart</h1>
  <table>
    <thead>
    <tr>
      <th>Check</th>
      <th>No</th>
      <th>Product Store</th>
      <th>Product Type</th>
      <th>Product Name</th>
      <th>Product Price</th>
      <th>Quantity</th>
      <!--    <th>Change Quantity</th>-->
      <th>Total</th>
      <th>Delete</th>
    </tr>
    </thead>
    <tbody>



    <tr th:each="cartItem, status: ${cartItemList}">
      <td><input type="checkbox" onchange="calculateTotal()"></td>
      <td th:text="${status.count}"></td>
      <td th:text="${cartItem.getItem().getItemStore()}"></td>
      <td th:text="${cartItem.getItem().getItemType()}"></td>
      <td th:text="${cartItem.getItem().getItemName()}"></td>
      <td class="price" th:text="${#numbers.formatInteger(cartItem.getItem().getPrice(),0,'COMMA')} + ' 원'"></td>
      <td><input class="quantity" type="number" min="1" max="100000" name="amount" id="amount" th:value="${cartItem.getCount()}" onchange="calculateTotal()"></td>
      <!--    <td><button class="btn btn-primary" type="submit">Update</button></td>-->
      <td class="subtotal" th:text="${#numbers.formatInteger(cartItem.getItem().getPrice() * cartItem.getCount(),0 ,'COMMA')} + ' 원'"></td>
      <td><a class="btn btn-outline-secondary" th:href="@{/cart/delete/{cartItemId}(cartItemId=${cartItem.getId()})}" type="button"> Delete </a></td>
    </tr>



    <td colspan="6"></td>
    <td class="total"></td>
    <td></td>
    <td></td>
    </tr>
    </tbody>
<!--    <input type="hidden" th:name="_csrf" th:value="${_csrf.token}"/>-->
  </table>
  <button class="btn btn-primary" onclick="purchase()">Purchase</button>
<!--  <input type="hidden" th:name="_csrf" th:value="${_csrf.token}"/>-->
</div>
</body>

</html>



